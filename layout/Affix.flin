// FlinUI Affix Component
// Sticky positioning wrapper that becomes fixed when scrolled past threshold
// Props: offsetTop (number), isFixed (bool), onChange (fn)

// Props with defaults
offsetTop = props.offsetTop || 0
isFixed = props.isFixed || false
onChange = props.onChange

// Build class string
fixedClass = match isFixed { true -> " flin-affix--fixed", _ -> "" }

// Build inline style for fixed position
affixStyle = match isFixed {
    true -> "position: fixed; top: " ++ offsetTop ++ "px; z-index: var(--flin-z-fixed);",
    _ -> ""
}

<div class="flin-affix">
    <div class={"flin-affix-content" ++ fixedClass} style={affixStyle}>
        {children}
    </div>
</div>

<style scoped>
.flin-affix {
    position: relative;
}

.flin-affix-content {
    transition: none;
}

.flin-affix--fixed {
    box-shadow: var(--flin-shadow-md);
    background-color: var(--flin-bg);
}

/* Animation when becoming fixed */
@keyframes affixFadeIn {
    from {
        opacity: var(--flin-opacity-80);
        transform: translateY(calc(-1 * var(--flin-space-1)));
    }
    to {
        opacity: var(--flin-opacity-100);
        transform: translateY(0);
    }
}

.flin-affix--fixed {
    animation: affixFadeIn var(--flin-transition-fast) ease-out;
}

/* Dark theme support */
[data-theme="dark"] .flin-affix--fixed {
    background-color: var(--flin-neutral-900);
    box-shadow: var(--flin-shadow-lg);
}
</style>
